<div class="row">
  <div class="col-lg-12">
    <div class="ibox float-e-margins">
      <div class="ibox-content">
        <!-- 添加form -->
        <%= form_for(@template, url: "",:html=>{:class=>"form-horizontal spider-task-form"}) do |f| %>
          <div class="form-group">
            <label class="col-sm-2 control-label">名称</label>
            <div class="col-sm-10">
              <%= f.text_field :name, :placeholder=>"名称",:class=>"form-control"%>
            </div>
          </div>
          <div class="hr-line-dashed"></div>
          <div class="form-group">
            <label class="col-sm-2 control-label">绑定IP</label>
            <div class="col-sm-10">
              <div class="i-checks inline">
                <label class="control-label">
                  <%= f.radio_button(:is_bind_ip, false, :checked=> true)%>
                  <i></i> 否
                </label>
              </div>
              <div class="i-checks inline">
                <label class="control-label">
                  <%= f.radio_button(:is_bind_ip, true)%>
                  <i></i> 是
                </label>
              </div>
            </div>
          </div>
          <div class="hr-line-dashed"></div>
          <div class="form-group">
            <label class="col-sm-2 control-label">选择模版</label>
            <div class="col-sm-3">
              <%= f.text_field :window_size, :placeholder=>"窗口大小", :class=>"form-control"%>
            </div>
            <div class="col-sm-5">
              <% ControlTemplate.window_types.each do |k, v|  %>
                <div class="i-checks inline">
                  <label class="control-label">
                    <%= f.radio_button(:window_type, k , :checked=> true)%>
                    <i></i> <%= v %>
                  </label>
                </div>
              <% end %>
            </div>
          </div>
          <div class="hr-line-dashed"></div>
          <div class="form-group">
            <label class="col-sm-2 control-label">绝对时间</label>
            <div class="col-sm-10">
              <div class="i-checks inline">
                <label class="control-label">
                  <%= f.radio_button(:is_absolute_time, true, :checked=> true)%>
                  <i></i> 是
                </label>
              </div>
              <div class="i-checks inline">
                <label class="control-label">
                  <%= f.radio_button(:is_bind_ip, false)%>
                  <i></i> 否
                </label>
              </div>
            </div>
          </div>
          <div class="hr-line-dashed"></div>
          <div class="form-group">
            <div class="col-sm-2 col-sm-offset-10">
              <button class="btn btn-primary submit_btn" type="button">保存</button>
            </div>
          </div>
        <%end%>
      </div>
    </div>
  </div>
</div>
<div class="hide keywords">
  <div class="form-group ">
    <label class="col-sm-2 control-label">关键词</label>
    <div class="col-sm-10">
      <input placeholder="输入关键词(多关键词以英文','分割)" class="form-control" type="text" name="spider_task[keyword]" id="spider_task_keyword">
    </div>
  </div>
  <div class="hr-line-dashed"></div>
</div>
<% content_for :javascript do %>
  <script type="text/javascript">
function get_spider () {
  var spider_id = $('#spider_task_spider_id').val();
  if (spider_id!=""){
  url  = '/spiders/'+ spider_id +'/spider_tasks'
  $('.spider-task-form').attr('action',url);
  $.ajax({
  url:"/tasks/get_spider",
    data:{id:spider_id},
    type:"get",
    dataType:"text",
    success:function(result){
  if (result=="true"){
  $(".keywords_inputs").html($('.keywords').html());
}else{
  $(".keywords_inputs").html('');
}

}
});
}
}
  $("#iconrange_spider_task_level_num").ionRangeSlider({
  min: 1,
    max: 24,
    from: 0,
    //postfix: "",
    grid: true,
    grid_num: 9,
    onFinish: function (data) {
  $(".level_num").val(data.from);
}
});
  $("#iconrange_spider_task_retry_num").ionRangeSlider({
  min: 1,
    max: 10,
    from: 0,
    //postfix: "",
    grid: true,
    grid_num: 9,
    onFinish: function (data) {
  $(".retry_num").val(data.from);
}
});
  </script>
<%end%>
